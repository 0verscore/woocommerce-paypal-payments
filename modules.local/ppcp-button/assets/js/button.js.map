{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/js/button.js","webpack:///./resources/js/modules/ButtonsToggleListener.js","webpack:///./resources/js/modules/ErrorHandler.js","webpack:///./resources/js/modules/Renderer.js","webpack:///./resources/js/modules/SingleProductConfig.js","webpack:///./resources/js/modules/UpdateCart.js"],"names":["document","addEventListener","PayPalCommerceGateway","console","error","querySelector","button","wrapper","context","errorHandler","ErrorHandler","renderer","Renderer","url","updateCart","UpdateCart","ajax","change_cart","endpoint","nonce","configurator","SingleProductConfig","showButtons","bind","hideButtons","render","configuration","ButtonsToggleListener","constructor","element","showCallback","hideCallback","observer","init","config","attributes","callback","classList","contains","MutationObserver","observe","disconnect","message","text","add","innerText","sanitize","textarea","createElement","innerHTML","value","clear","remove","buttonConfig","script","paypal","setAttribute","event","renderButtons","body","append","Buttons","style","display","showButtonCallback","hideButtonCallback","formElement","hasVariations","onApprove","data","actions","redirect","createOrder","onError","product","qty","variations","onResolve","purchase_units","fetch","create_order","method","JSON","stringify","then","res","json","success","id","promise","update","querySelectorAll","map","name","Promise","resolve","reject","result","resolved"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;AAEAA,SAASC,gBAAT,CACI,kBADJ,EAEI,MAAM;AACF,QAAI,CAAE,OAAOC,qBAAb,EAAqC;AACjCC,gBAAQC,KAAR,CAAc,wCAAd;AACA;AACH;AACD,QAAI,CAAEJ,SAASK,aAAT,CAAuBH,sBAAsBI,MAAtB,CAA6BC,OAApD,CAAN,EAAoE;AAChEJ,gBAAQC,KAAR,CAAc,qCAAd;AACA;AACH;AACD,UAAMI,UAAUN,sBAAsBM,OAAtC;AACA,QAAIA,YAAY,SAAZ,IAAyB,CAAER,SAASK,aAAT,CAAuB,WAAvB,CAA/B,EAAqE;AACjE;AACH;;AAED,UAAMI,eAAe,IAAIC,6DAAJ,EAArB;AACA,UAAMC,WAAW,IAAIC,yDAAJ,CAAa;AAC1BC,aAAKX,sBAAsBI,MAAtB,CAA6BO,GADR;AAE1BN,iBAAQL,sBAAsBI,MAAtB,CAA6BC;AAFX,KAAb,CAAjB;;AAMA,UAAMO,aAAa,IAAIC,2DAAJ,CACfb,sBAAsBc,IAAtB,CAA2BC,WAA3B,CAAuCC,QADxB,EAEfhB,sBAAsBc,IAAtB,CAA2BC,WAA3B,CAAuCE,KAFxB,CAAnB;AAIA,QAAIC,eAAe,IAAnB;AACA,QAAIZ,YAAY,SAAhB,EAA2B;AACvBY,uBAAe,IAAIC,oEAAJ,CACXnB,qBADW,EAEXY,UAFW,EAGXH,SAASW,WAAT,CAAqBC,IAArB,CAA0BZ,QAA1B,CAHW,EAIXA,SAASa,WAAT,CAAqBD,IAArB,CAA0BZ,QAA1B,CAJW,EAKXX,SAASK,aAAT,CAAuB,WAAvB,CALW,EAMXI,YANW,CAAf;AAQH;AACD,QAAI,CAAEW,YAAN,EAAoB;AAChBjB,gBAAQC,KAAR,CAAc,8BAAd;AACA;AACH;AACDO,aAASc,MAAT,CAAgBL,aAAaM,aAAb,EAAhB;AAEH,CA5CL,E;;;;;;;;;;;;ACLA;AAAA;;;;;AAKA,MAAMC,qBAAN,CAA4B;AACxBC,gBAAYC,OAAZ,EAAqBC,YAArB,EAAmCC,YAAnC,EAAiD;AAC7C,aAAKF,OAAL,GAAeA,OAAf;AACA,aAAKC,YAAL,GAAoBA,YAApB;AACA,aAAKC,YAAL,GAAoBA,YAApB;AACA,aAAKC,QAAL,GAAgB,IAAhB;AACH;;AAEDC,WAAO;AACH,cAAMC,SAAS,EAAEC,YAAa,IAAf,EAAf;AACA,cAAMC,WAAW,MAAM;AACnB,gBAAI,KAAKP,OAAL,CAAaQ,SAAb,CAAuBC,QAAvB,CAAgC,UAAhC,CAAJ,EAAiD;AAC7C,qBAAKP,YAAL;AACA;AACH;AACD,iBAAKD,YAAL;AACH,SAND;AAOA,aAAKE,QAAL,GAAgB,IAAIO,gBAAJ,CAAqBH,QAArB,CAAhB;AACA,aAAKJ,QAAL,CAAcQ,OAAd,CAAsB,KAAKX,OAA3B,EAAoCK,MAApC;AACH;;AAEDO,iBAAa;AACT,aAAKT,QAAL,CAAcS,UAAd;AACH;AAvBuB;;AA0Bbd,oFAAf,E;;;;;;;;;;;;AC/BA;AAAA,MAAMjB,YAAN,CAAmB;;AAEfkB,kBAAc;AACV,aAAKrB,OAAL,GAAeP,SAASK,aAAT,CAAuB,8BAAvB,CAAf;AACH;;AAEDqC,YAAQC,IAAR,EAAc;AACV,aAAKpC,OAAL,CAAa8B,SAAb,CAAuBO,GAAvB,CAA2B,mBAA3B;AACA,aAAKrC,OAAL,CAAasC,SAAb,GAAyB,KAAKC,QAAL,CAAcH,IAAd,CAAzB;AACH;;AAEDG,aAASH,IAAT,EAAe;AACX,cAAMI,WAAW/C,SAASgD,aAAT,CAAuB,UAAvB,CAAjB;AACAD,iBAASE,SAAT,GAAqBN,IAArB;AACA,eAAOI,SAASG,KAAhB;AACH;;AAEDC,YAAQ;AACJ,YAAI,CAAE,KAAK5C,OAAL,CAAa8B,SAAb,CAAuBC,QAAvB,CAAgC,mBAAhC,CAAN,EAA4D;AACxD;AACH;AACD,aAAK/B,OAAL,CAAa8B,SAAb,CAAuBe,MAAvB,CAA8B,mBAA9B;AACA,aAAK7C,OAAL,CAAasC,SAAb,GAAyB,EAAzB;AACH;AAvBc;;AA0BJnC,2EAAf,E;;;;;;;;;;;;AC1BA;AAAA,MAAME,QAAN,CAAe;;AAEXgB,gBAAYM,MAAZ,EAAoB;AAChB,aAAKA,MAAL,GAAcA,MAAd;AACH;;AAEDT,WAAO4B,YAAP,EAAqB;;AAEjB,cAAMC,SAAStD,SAASgD,aAAT,CAAuB,QAAvB,CAAf;;AAEA,YAAI,OAAOO,MAAP,KAAkB,QAAtB,EAAgC;AAC5BD,mBAAOE,YAAP,CAAoB,KAApB,EAA2B,KAAKtB,MAAL,CAAYrB,GAAvC;AACAyC,mBAAOrD,gBAAP,CAAwB,MAAxB,EAAiCwD,KAAD,IAAW;AACvC,qBAAKC,aAAL,CAAmBL,YAAnB;AACH,aAFD;AAGArD,qBAAS2D,IAAT,CAAcC,MAAd,CAAqBN,MAArB;AACA;AACH;;AAED,aAAKI,aAAL,CAAmBL,YAAnB;AACH;;AAEDK,kBAAcL,YAAd,EAA4B;;AAExBE,eAAOM,OAAP,CACIR,YADJ,EAEE5B,MAFF,CAES,KAAKS,MAAL,CAAY3B,OAFrB;AAGH;;AAEDiB,kBAAc;AACVxB,iBAASK,aAAT,CAAuB,KAAK6B,MAAL,CAAY3B,OAAnC,EAA4CuD,KAA5C,CAAkDC,OAAlD,GAA4D,MAA5D;AACH;;AAEDzC,kBAAc;AACVtB,iBAASK,aAAT,CAAuB,KAAK6B,MAAL,CAAY3B,OAAnC,EAA4CuD,KAA5C,CAAkDC,OAAlD,GAA4D,OAA5D;AACH;AAnCU;;AAsCAnD,uEAAf,E;;;;;;;;;;;;ACtCA;AAAA;AAAA;;AAEA,MAAMS,mBAAN,CAA0B;;AAEtBO,gBACIM,MADJ,EAEIpB,UAFJ,EAGIkD,kBAHJ,EAIIC,kBAJJ,EAKIC,WALJ,EAMIzD,YANJ,EAOE;AACE,aAAKyB,MAAL,GAAcA,MAAd;AACA,aAAKpB,UAAL,GAAkBA,UAAlB;AACA,aAAKkD,kBAAL,GAA0BA,kBAA1B;AACA,aAAKC,kBAAL,GAA0BA,kBAA1B;AACA,aAAKC,WAAL,GAAmBA,WAAnB;AACA,aAAKzD,YAAL,GAAoBA,YAApB;AACH;;AAEDiB,oBAAgB;;AAEZ,YAAK,KAAKyC,aAAL,EAAL,EAA4B;AACxB,kBAAMnC,WAAW,IAAIL,8DAAJ,CACb,KAAKuC,WAAL,CAAiB7D,aAAjB,CAA+B,4BAA/B,CADa,EAEb,KAAK2D,kBAFQ,EAGb,KAAKC,kBAHQ,CAAjB;AAKAjC,qBAASC,IAAT;AACH;AACD,cAAMmC,YAAY,CAACC,IAAD,EAAOC,OAAP,KAAmB;AACjC,mBAAOA,QAAQC,QAAR,CAAiB,KAAKrC,MAAL,CAAYqC,QAA7B,CAAP;AACH,SAFD;AAGA,eAAO;AACHC,yBAAa,KAAKA,WAAL,EADV;AAEHJ,qBAFG;AAGHK,qBAAUrE,KAAD,IAAW;AAChB,qBAAKK,YAAL,CAAkBiC,OAAlB,CAA0BtC,KAA1B;AACH;AALE,SAAP;AAOH;;AAEDoE,kBAAc;AACV,cAAMA,cAAc,CAACH,IAAD,EAAOC,OAAP,KAAmB;AACnC,iBAAK7D,YAAL,CAAkB0C,KAAlB;AACA,kBAAMuB,UAAU1E,SAASK,aAAT,CAAuB,sBAAvB,EAA+C6C,KAA/D;AACA,kBAAMyB,MAAM3E,SAASK,aAAT,CAAuB,mBAAvB,EAA4C6C,KAAxD;AACA,kBAAM0B,aAAa,KAAKA,UAAL,EAAnB;;AAEA,kBAAMC,YAAaC,cAAD,IAAoB;AAClC,uBAAOC,MAAM,KAAK7C,MAAL,CAAYlB,IAAZ,CAAiBgE,YAAjB,CAA8B9D,QAApC,EAA8C;AACjD+D,4BAAQ,MADyC;AAEjDtB,0BAAMuB,KAAKC,SAAL,CAAe;AACjBhE,+BAAM,KAAKe,MAAL,CAAYlB,IAAZ,CAAiBgE,YAAjB,CAA8B7D,KADnB;AAEjB2D;AAFiB,qBAAf;AAF2C,iBAA9C,EAMJM,IANI,CAMC,UAASC,GAAT,EAAc;AAClB,2BAAOA,IAAIC,IAAJ,EAAP;AACH,iBARM,EAQJF,IARI,CAQC,UAASf,IAAT,EAAe;AACnB,wBAAI,CAAEA,KAAKkB,OAAX,EAAoB;AAChB;AACA;AACH;AACD,2BAAOlB,KAAKA,IAAL,CAAUmB,EAAjB;AACH,iBAdM,CAAP;AAeH,aAhBD;;AAkBA,kBAAMC,UAAU,KAAK3E,UAAL,CAAgB4E,MAAhB,CAAuBb,SAAvB,EAAkCH,OAAlC,EAA2CC,GAA3C,EAAgDC,UAAhD,CAAhB;AACA,mBAAOa,OAAP;AACH,SA1BD;AA2BA,eAAOjB,WAAP;AACH;;AAEDI,iBAAa;;AAET,YAAI,CAAE,KAAKT,aAAL,EAAN,EAA4B;AACxB,mBAAO,IAAP;AACH;AACD,cAAMhC,aAAa,CAAC,GAAG,KAAK+B,WAAL,CAAiByB,gBAAjB,CAAkC,sBAAlC,CAAJ,EAA+DC,GAA/D,CACd/D,OAAD,IAAa;AACT,mBAAO;AACHqB,uBAAMrB,QAAQqB,KADX;AAEH2C,sBAAKhE,QAAQgE;AAFV,aAAP;AAIH,SANc,CAAnB;AAQA,eAAO1D,UAAP;AACH;;AAEDgC,oBAAgB;AACZ,eAAO,KAAKD,WAAL,CAAiB7B,SAAjB,CAA2BC,QAA3B,CAAoC,iBAApC,CAAP;AACH;AAzFqB;;AA4FXjB,kFAAf,E;;;;;;;;;;;;AC9FA;AAAA,MAAMN,UAAN,CAAiB;;AAEba,gBAAYV,QAAZ,EAAsBC,KAAtB,EAA6B;AACzB,aAAKD,QAAL,GAAgBA,QAAhB;AACA,aAAKC,KAAL,GAAaA,KAAb;AACH;;AAEDuE,WAAOb,SAAP,EAAkBH,OAAlB,EAA2BC,GAA3B,EAAgCC,UAAhC,EAA4C;AACxC,eAAO,IAAIkB,OAAJ,CAAa,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACrCjB,kBACI,KAAK7D,QADT,EAEI;AACI+D,wBAAQ,MADZ;AAEItB,sBAAMuB,KAAKC,SAAL,CAAe;AACjBhE,2BAAO,KAAKA,KADK;AAEjBuD,2BAFiB;AAGjBC,uBAHiB;AAIjBC;AAJiB,iBAAf;AAFV,aAFJ,EAWEQ,IAXF,CAYKa,MAAD,IAAY;AACR,uBAAOA,OAAOX,IAAP,EAAP;AACH,aAdL,EAeEF,IAfF,CAeSa,MAAD,IAAY;AACZ,oBAAI,CAAEA,OAAOV,OAAb,EAAsB;AAClBS,2BAAOC,OAAO5B,IAAd;AACA;AACH;;AAED,sBAAM6B,WAAWrB,UAAUoB,OAAO5B,IAAjB,CAAjB;AACA0B,wBAAQG,QAAR;AACH,aAvBL;AAyBH,SA1BM,CAAP;AA2BH;AAnCY;;AAsCFnF,yEAAf,E","file":"js/button.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./resources/js/button.js\");\n","import Renderer from './modules/Renderer';\nimport SingleProductConfig from './modules/SingleProductConfig';\nimport UpdateCart from './modules/UpdateCart';\nimport ErrorHandler from './modules/ErrorHandler';\n\ndocument.addEventListener(\n    'DOMContentLoaded',\n    () => {\n        if (! typeof(PayPalCommerceGateway)) {\n            console.error('PayPal button could not be configured.');\n            return;\n        }\n        if (! document.querySelector(PayPalCommerceGateway.button.wrapper)) {\n            console.error('No wrapper for PayPal button found.');\n            return;\n        }\n        const context = PayPalCommerceGateway.context;\n        if (context === 'product' && ! document.querySelector('form.cart') ) {\n            return;\n        }\n\n        const errorHandler = new ErrorHandler();\n        const renderer = new Renderer({\n            url: PayPalCommerceGateway.button.url,\n            wrapper:PayPalCommerceGateway.button.wrapper\n        });\n\n\n        const updateCart = new UpdateCart(\n            PayPalCommerceGateway.ajax.change_cart.endpoint,\n            PayPalCommerceGateway.ajax.change_cart.nonce\n        );\n        let configurator = null;\n        if (context === 'product') {\n            configurator = new SingleProductConfig(\n                PayPalCommerceGateway,\n                updateCart,\n                renderer.showButtons.bind(renderer),\n                renderer.hideButtons.bind(renderer),\n                document.querySelector('form.cart'),\n                errorHandler\n            );\n        }\n        if (! configurator) {\n            console.error('No context for button found.');\n            return;\n        }\n        renderer.render(configurator.configuration());\n\n    }\n);","/**\n * When you can't add something to the cart, the PayPal buttons should not show.\n * Therefore we listen for changes on the add to cart button and show/hide the buttons accordingly.\n */\n\nclass ButtonsToggleListener {\n    constructor(element, showCallback, hideCallback) {\n        this.element = element;\n        this.showCallback = showCallback;\n        this.hideCallback = hideCallback;\n        this.observer = null;\n    }\n\n    init() {\n        const config = { attributes : true };\n        const callback = () => {\n            if (this.element.classList.contains('disabled')) {\n                this.hideCallback();\n                return;\n            }\n            this.showCallback();\n        }\n        this.observer = new MutationObserver(callback);\n        this.observer.observe(this.element, config);\n    }\n\n    disconnect() {\n        this.observer.disconnect();\n    }\n}\n\nexport default ButtonsToggleListener;","class ErrorHandler {\n\n    constructor() {\n        this.wrapper = document.querySelector('.woocommerce-notices-wrapper');\n    }\n\n    message(text) {\n        this.wrapper.classList.add('woocommerce-error');\n        this.wrapper.innerText = this.sanitize(text);\n    }\n\n    sanitize(text) {\n        const textarea = document.createElement('textarea');\n        textarea.innerHTML = text;\n        return textarea.value;\n    }\n\n    clear() {\n        if (! this.wrapper.classList.contains('woocommerce-error')) {\n            return;\n        }\n        this.wrapper.classList.remove('woocommerce-error');\n        this.wrapper.innerText = '';\n    }\n}\n\nexport default ErrorHandler;","class Renderer {\n\n    constructor(config) {\n        this.config = config;\n    }\n\n    render(buttonConfig) {\n\n        const script = document.createElement('script');\n\n        if (typeof paypal !== 'object') {\n            script.setAttribute('src', this.config.url);\n            script.addEventListener('load', (event) => {\n                this.renderButtons(buttonConfig);\n            })\n            document.body.append(script);\n            return;\n        }\n\n        this.renderButtons(buttonConfig);\n    }\n\n    renderButtons(buttonConfig) {\n\n        paypal.Buttons(\n            buttonConfig\n        ).render(this.config.wrapper);\n    }\n\n    hideButtons() {\n        document.querySelector(this.config.wrapper).style.display = 'none';\n    }\n\n    showButtons() {\n        document.querySelector(this.config.wrapper).style.display = 'block';\n    }\n}\n\nexport default Renderer;","import ButtonsToggleListener from \"./ButtonsToggleListener\";\n\nclass SingleProductConfig {\n\n    constructor(\n        config,\n        updateCart,\n        showButtonCallback,\n        hideButtonCallback,\n        formElement,\n        errorHandler\n    ) {\n        this.config = config;\n        this.updateCart = updateCart;\n        this.showButtonCallback = showButtonCallback;\n        this.hideButtonCallback = hideButtonCallback;\n        this.formElement = formElement;\n        this.errorHandler = errorHandler;\n    }\n\n    configuration() {\n\n        if ( this.hasVariations() ) {\n            const observer = new ButtonsToggleListener(\n                this.formElement.querySelector('.single_add_to_cart_button'),\n                this.showButtonCallback,\n                this.hideButtonCallback\n            );\n            observer.init();\n        }\n        const onApprove = (data, actions) => {\n            return actions.redirect(this.config.redirect);\n        }\n        return {\n            createOrder: this.createOrder(),\n            onApprove,\n            onError: (error) => {\n                this.errorHandler.message(error);\n            }\n        }\n    }\n\n    createOrder() {\n        const createOrder = (data, actions) => {\n            this.errorHandler.clear();\n            const product = document.querySelector('[name=\"add-to-cart\"]').value;\n            const qty = document.querySelector('[name=\"quantity\"]').value;\n            const variations = this.variations();\n\n            const onResolve = (purchase_units) => {\n                return fetch(this.config.ajax.create_order.endpoint, {\n                    method: 'POST',\n                    body: JSON.stringify({\n                        nonce:this.config.ajax.create_order.nonce,\n                        purchase_units\n                    })\n                }).then(function(res) {\n                    return res.json();\n                }).then(function(data) {\n                    if (! data.success) {\n                        //Todo: Error handling\n                        return;\n                    }\n                    return data.data.id;\n                });\n            };\n\n            const promise = this.updateCart.update(onResolve, product, qty, variations);\n            return promise;\n        };\n        return createOrder;\n    }\n\n    variations() {\n\n        if (! this.hasVariations()) {\n            return null;\n        }\n        const attributes = [...this.formElement.querySelectorAll(\"[name^='attribute_']\")].map(\n            (element) => {\n                return {\n                    value:element.value,\n                    name:element.name\n                }\n            }\n        );\n        return attributes;\n    }\n\n    hasVariations() {\n        return this.formElement.classList.contains('variations_form');\n    }\n}\n\nexport default SingleProductConfig;","class UpdateCart {\n\n    constructor(endpoint, nonce) {\n        this.endpoint = endpoint;\n        this.nonce = nonce;\n    }\n\n    update(onResolve, product, qty, variations) {\n        return new Promise( (resolve, reject) => {\n            fetch(\n                this.endpoint,\n                {\n                    method: 'POST',\n                    body: JSON.stringify({\n                        nonce: this.nonce,\n                        product,\n                        qty,\n                        variations\n                    })\n                }\n            ).then(\n                (result) => {\n                    return result.json();\n                }\n            ).then( (result) => {\n                    if (! result.success) {\n                        reject(result.data);\n                        return;\n                    }\n\n                    const resolved = onResolve(result.data);\n                    resolve(resolved);\n                }\n            )\n        });\n    }\n}\n\nexport default UpdateCart;"],"sourceRoot":""}